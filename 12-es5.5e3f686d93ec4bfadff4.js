function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{urSS:function(t,n,e){"use strict";e.r(n),e.d(n,"NotificationModule",(function(){return R}));var i,a=e("ofXK"),o=e("tyNb"),c=e("lDzL"),l=e("1kSV"),s=e("fXoL"),r=e("EfS0"),d=((i=function(){function t(n){_classCallCheck(this,t),this.commonService=n}return _createClass(t,[{key:"getNotifications",value:function(t){return this.commonService.get("/admin/get-all-spread-notification".concat(t))}},{key:"addNotification",value:function(t){return this.commonService.post("admin/spread-notification",t)}}]),t}()).\u0275fac=function(t){return new(t||i)(s.gc(r.a))},i.\u0275prov=s.Ob({token:i,factory:i.\u0275fac,providedIn:"root"}),i),b=e("sYmb"),u=e("668k"),f=e("M9IT");function p(t,n){if(1&t){var e=s.Zb();s.Yb(0,"span",19),s.Yb(1,"i",20),s.kc("click",(function(){s.Hc(e);var t=n.row,i=s.oc(2),a=s.Dc(16);return i.openModal(t,a)})),s.Xb(),s.Xb()}}function g(t,n){if(1&t){var e=s.Zb();s.Yb(0,"div",22),s.Yb(1,"mat-paginator",23),s.kc("page",(function(t){return s.Hc(e),s.oc(3).pageEvent(t)})),s.Xb(),s.Xb()}if(2&t){var i=s.oc(3);s.Cb(1),s.tc("pageIndex",i.pagination.CurrentPage-1)("length",i.pagination.TotalCount)("pageSize",i.pagination.PageSize)("pageSizeOptions",i.pageSizeOptions)}}function h(t,n){if(1&t&&s.Pc(0,g,2,4,"div",21),2&t){var e=s.oc(2);s.tc("ngIf",!e.loading)}}function m(t,n){if(1&t&&(s.Yb(0,"div",11),s.Yb(1,"ngx-datatable",12),s.Tb(2,"ngx-datatable-column",13),s.pc(3,"translate"),s.Tb(4,"ngx-datatable-column",14),s.pc(5,"translate"),s.Tb(6,"ngx-datatable-column",15),s.pc(7,"translate"),s.Yb(8,"ngx-datatable-column",16),s.pc(9,"translate"),s.Pc(10,p,2,0,"ng-template",17),s.Xb(),s.Yb(11,"ngx-datatable-footer"),s.Pc(12,h,1,1,"ng-template",18),s.Xb(),s.Xb(),s.Xb()),2&t){var e=s.oc();s.Cb(1),s.tc("rows",e.notifications)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto"),s.Cb(1),s.uc("name",s.qc(3,9,"not_send_to")),s.Cb(2),s.uc("name",s.qc(5,11,"not_content")),s.Cb(2),s.uc("name",s.qc(7,13,"not_created_date")),s.Cb(2),s.uc("name",s.qc(9,15,"not_preview"))}}function v(t,n){if(1&t&&(s.Yb(0,"div",24),s.Yb(1,"h5",25),s.Rc(2,"Template"),s.Xb(),s.Yb(3,"button",26),s.kc("click",(function(){return n.$implicit.dismiss("Cross click")})),s.Yb(4,"span",27),s.Rc(5,"\xd7"),s.Xb(),s.Xb(),s.Xb(),s.Yb(6,"div",28),s.Tb(7,"div",29),s.Tb(8,"div",30),s.Xb()),2&t){var e=s.oc();s.Cb(7),s.tc("innerHTML",e.selectedRow.content,s.Ic)}}var C,y,k,w,S=((C=function(){function t(n,e,i,a,o){var c=this;_classCallCheck(this,t),this.router=n,this.notificationService=e,this.translate=i,this.cs=a,this.modalService=o,this.notifications=[],this.loading=!1,this.pagination={CurrentPage:1,HasNext:!1,HasPrevious:!1,PageSize:10,TotalCount:0,TotalPages:1},this.pageSizeOptions=[5,10,25,50],this.cs.isLoading.subscribe((function(t){c.loading=t}))}return _createClass(t,[{key:"open",value:function(t){var n=this;console.log(t),this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then((function(t){n.closeResult="Closed with: ".concat(t),n.selectedRow=null}),(function(t){n.closeResult="Dismissed ".concat(n.getDismissReason(t)),n.selectedRow=null}))}},{key:"getDismissReason",value:function(t){return t===l.a.ESC?"by pressing ESC":t===l.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(t)}},{key:"addNotification",value:function(){this.router.navigate(["/notifications/add-notification"])}},{key:"onSelectRow",value:function(t){console.log(t)}},{key:"updateFilter",value:function(t){var n=t.target.value.toLowerCase(),e=this.notifications.filter((function(t){return-1!==t.name.toLowerCase().indexOf(n)||!n}));this.notifications=e,this.table.offset=0}},{key:"ngOnInit",value:function(){this.fetchNotifications()}},{key:"pageEvent",value:function(t){console.log(t),this.pagination.PageSize=t.pageSize,this.pagination.CurrentPage=t.pageIndex+1,this.fetchNotifications()}},{key:"fetchNotifications",value:function(){var t=this,n=this.pagination,e=n.PageSize,i=n.CurrentPage;this.loading=!0,this.notificationService.getNotifications("?PageSize=".concat(e,"&PageNumber=").concat(i)).subscribe((function(n){if(n){t.cs.isLoading.next(!1),t.loading=!1,t.notifications=n.body||[];var e=JSON.parse(n.headers.get("X-Pagination"));e&&(t.pagination=e),console.log("pagination",t.pagination)}}))}},{key:"onEdit",value:function(t){console.log("row click",t),this.router.navigate(["/notifications/edit-notification/",t])}},{key:"onDelete",value:function(t){console.log("row click",t)}},{key:"setPage",value:function(t){console.log("page--",t)}},{key:"openModal",value:function(t,n){console.log(t),this.selectedRow=t,this.open(n)}}]),t}()).\u0275fac=function(t){return new(t||C)(s.Sb(o.d),s.Sb(d),s.Sb(b.d),s.Sb(r.a),s.Sb(l.j))},C.\u0275cmp=s.Mb({type:C,selectors:[["app-notification"]],viewQuery:function(t,n){var e;1&t&&s.Xc(c.d,!0),2&t&&s.Cc(e=s.lc())&&(n.table=e.first)},decls:17,vars:8,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card-body"],[2,"display","flex","align-items","center","justify-content","center"],[3,"loading"],["class","custom-datatable",4,"ngIf"],["TemplateModal",""],[1,"custom-datatable"],[1,"bootstrap",3,"rows","columnMode","headerHeight","footerHeight","rowHeight"],["prop","sendTo",3,"name"],["prop","content",3,"name"],["prop","creationTime",3,"name"],[3,"name"],["ngx-datatable-cell-template",""],["ngx-datatable-footer-template",""],[2,"color","#f88379","cursor","pointer"],[1,"fa","fa-eye",3,"click"],["class","pagination","style","margin-bottom: 10px; width: -webkit-fill-available",4,"ngIf"],[1,"pagination",2,"margin-bottom","10px","width","-webkit-fill-available"],[2,"width","-webkit-fill-available",3,"pageIndex","length","pageSize","pageSizeOptions","page"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHTML"],[1,"action",2,"text-align","end"]],template:function(t,n){1&t&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"div",4),s.Yb(5,"h5"),s.Rc(6),s.pc(7,"translate"),s.Xb(),s.Yb(8,"button",5),s.kc("click",(function(){return n.addNotification()})),s.Rc(9),s.pc(10,"translate"),s.Xb(),s.Xb(),s.Yb(11,"div",6),s.Yb(12,"div",7),s.Tb(13,"app-loader",8),s.Xb(),s.Pc(14,m,13,17,"div",9),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Pc(15,v,9,1,"ng-template",null,10,s.Qc)),2&t&&(s.Cb(6),s.Sc(s.qc(7,4,"Notification")),s.Cb(3),s.Tc(" ",s.qc(10,6,"n_create_notification")," "),s.Cb(4),s.tc("loading",n.loading),s.Cb(1),s.tc("ngIf",!n.loading))},directives:[u.a,a.m,c.d,c.b,c.a,c.e,c.c,f.a],pipes:[b.c],styles:[""]}),C),x=e("pqks"),X=e("CRtM"),Y=e("VkHG"),P=[{path:"",component:S,data:{title:"Notification",breadcrumb:"Notification"}},{path:"add-notification",component:(y=function(){function t(n,e,i){var a=this;_classCallCheck(this,t),this.notificationService=n,this.cs=e,this.router=i,this.selectedUser={},this.content="",this.loading=!1,this.uploadImage=null,this.cs.isLoading.subscribe((function(t){a.loading=t}))}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"readUrl",value:function(t){var n=this;if(0!==t.target.files.length&&null!=t.target.files[0].type.match(/image\/*/)){var e=new FileReader;e.readAsDataURL(t.target.files[0]),e.onload=function(t){var i=e.result.toString();console.log(i),n.uploadImage=i}}}},{key:"removeBase64",value:function(t){return t.split("base64,")[1]}},{key:"addBase64",value:function(t){return"data:image/jpeg;base64,".concat(t)}},{key:"handleChange",value:function(t){this.content=t}},{key:"onAddNotification",value:function(t){var n=this;this.loading=!0,this.notificationService.addNotification({SendTo:t,content:this.content}).subscribe((function(t){n.loading=!1,n.router.navigate(["/notifications"])}))}}]),t}(),y.\u0275fac=function(t){return new(t||y)(s.Sb(d),s.Sb(r.a),s.Sb(o.d))},y.\u0275cmp=s.Mb({type:y,selectors:[["app-add-notification"]],decls:16,vars:20,consts:[[1,"container-fluid"],[1,"row"],[1,"col-12","col-md-12",2,"margin-bottom","20px"],[1,"card","editor-box"],[1,"image-upload"],["for","file-input"],[1,"font-warning",3,"icon"],["id","file-input","type","file",3,"change"],[3,"text","textChange","textEmit"],[2,"display","flex","justify-content","space-between","padding-top","15px"],[3,"btnType","loading","disabled","btnText","onSubmit"]],template:function(t,n){1&t&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"div",4),s.Yb(5,"label",5),s.Tb(6,"app-feather-icons",6),s.Xb(),s.Yb(7,"input",7),s.kc("change",(function(t){return n.readUrl(t)})),s.Xb(),s.Xb(),s.Yb(8,"app-text-editor",8),s.kc("textChange",(function(t){return n.content=t}))("textEmit",(function(t){return n.handleChange(t)})),s.Xb(),s.Yb(9,"div",9),s.Yb(10,"app-button",10),s.kc("onSubmit",(function(){return n.onAddNotification(0)})),s.pc(11,"translate"),s.Xb(),s.Yb(12,"app-button",10),s.kc("onSubmit",(function(){return n.onAddNotification(1)})),s.pc(13,"translate"),s.Xb(),s.Yb(14,"app-button",10),s.kc("onSubmit",(function(){return n.onAddNotification(2)})),s.pc(15,"translate"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb()),2&t&&(s.Cb(6),s.tc("icon","upload"),s.Cb(2),s.tc("text",n.content),s.Cb(2),s.uc("btnText",s.qc(11,14,"not_all_sellers")),s.tc("btnType","submit")("loading",n.loading)("disabled",!n.content||n.loading),s.Cb(2),s.uc("btnText",s.qc(13,16,"not_all_customers")),s.tc("btnType","submit")("loading",n.loading)("disabled",!n.content||n.loading),s.Cb(2),s.uc("btnText",s.qc(15,18,"not_spread_all")),s.tc("btnType","submit")("loading",n.loading)("disabled",!n.content||n.loading))},directives:[x.a,X.a,Y.a],pipes:[b.c],styles:[".chat-side-bar[_ngcontent-%COMP%]{right:0!important;top:0!important;position:unset!important}.chat-side-bar[_ngcontent-%COMP%], .editor-box[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 0 9px hsla(0,0%,74.9%,.36)}.editor-box[_ngcontent-%COMP%]{padding:15px}.image-upload[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{display:none}"]}),y),data:{title:"Add Notification",breadcrumb:"Add Notification"}}],_=((k=function t(){_classCallCheck(this,t)}).\u0275mod=s.Qb({type:k}),k.\u0275inj=s.Pb({factory:function(t){return new(t||k)},imports:[[o.h.forChild(P)],o.h]}),k),T=e("RS3s"),N=e("PCNd"),M=e("3Pt+"),R=((w=function t(){_classCallCheck(this,t)}).\u0275mod=s.Qb({type:w}),w.\u0275inj=s.Pb({factory:function(t){return new(t||w)},imports:[[M.h,M.t,a.c,_,T.b,c.f,N.a]]}),w)}}]);
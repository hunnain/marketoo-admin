function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"3TMC":function(e,t,a){"use strict";a.r(t),a.d(t,"CampaignModule",(function(){return z}));var n,i=a("ofXK"),c=a("1kSV"),o=a("3Pt+"),r=a("lDzL"),l=a("tyNb"),s=a("fXoL"),b=a("EfS0"),u=((n=function(){function e(t){_classCallCheck(this,e),this.commonService=t}return _createClass(e,[{key:"getAllCampaigns",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.commonService.get("admin/get-all-campaigns".concat(e))}},{key:"getRandomCampaigns",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.commonService.get("admin/get-random-campaigns".concat(e))}},{key:"updateCampaignStatus",value:function(e,t){return this.commonService.get("admin/campaign-status-update/".concat(e,"-").concat(t))}},{key:"createCampaign",value:function(e){return this.commonService.post("admin/create-campaign",e)}},{key:"removeCampaign",value:function(e){return this.commonService.delete("admin/delete-campaign/".concat(e))}}]),e}()).\u0275fac=function(e){return new(e||n)(s.gc(b.a))},n.\u0275prov=s.Ob({token:n,factory:n.\u0275fac,providedIn:"root"}),n),d=a("YpNe"),p=a("CRtM"),g=a("668k"),m=a("VkHG"),f=a("pqks"),h=a("sYmb");function v(e,t){if(1&e&&(s.Yb(0,"div",23),s.Yb(1,"h5",24),s.Rc(2,"Template"),s.Xb(),s.Yb(3,"button",25),s.kc("click",(function(){return t.$implicit.dismiss("Cross click")})),s.Yb(4,"span",26),s.Rc(5,"\xd7"),s.Xb(),s.Xb(),s.Xb(),s.Yb(6,"div",27),s.Tb(7,"div",28),s.Tb(8,"div",29),s.Xb()),2&e){var a=s.oc();s.Cb(7),s.tc("innerHTML",a.template,s.Ic)}}var C,k=((C=function(){function e(t,a,n,i){var c=this;_classCallCheck(this,e),this.router=t,this.campaignService=a,this.cs=n,this.modalService=i,this.name="",this.status=0,this.template="",this.campaigns=[],this.loading=!1,this.config={clickable:!0,maxFiles:1,autoReset:null,errorReset:null,cancelReset:null,autoProcessQueue:!1,autoQueue:!1,addRemoveLinks:!0},this.cs.isLoading.subscribe((function(e){c.loading=e}))}return _createClass(e,[{key:"open",value:function(e){var t=this;console.log(e),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then((function(e){t.closeResult="Closed with: ".concat(e)}),(function(e){t.closeResult="Dismissed ".concat(t.getDismissReason(e))}))}},{key:"getDismissReason",value:function(e){return e===c.a.ESC?"by pressing ESC":e===c.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(e)}},{key:"ngOnInit",value:function(){}},{key:"goBack",value:function(){this.router.navigate(["/campaign"])}},{key:"handleChange",value:function(e,t){this.template=e}},{key:"onAddCampaign",value:function(){var e=this;this.loading=!0,this.campaignService.createCampaign({name:this.name,text:this.template,status:this.status}).subscribe((function(t){e.cs.isLoading.next(!1),e.goBack(),e.loading=!1}))}},{key:"onViewTemplate",value:function(e){this.open(e)}},{key:"onUploadError",value:function(e){}},{key:"onUploadSuccess",value:function(e){}}]),e}()).\u0275fac=function(e){return new(e||C)(s.Sb(l.d),s.Sb(u),s.Sb(b.a),s.Sb(c.j))},C.\u0275cmp=s.Mb({type:C,selectors:[["app-campaign"]],decls:49,vars:21,consts:[[1,"container-fluid"],[1,"row"],[1,"col-xl-8",2,"padding-right","0%"],["id","name","name","name","type","text","required","",1,"form-control","field-margin",3,"ngModel","placeholder","ngModelChange"],[3,"config","message","error","success"],[2,"background","white"],[3,"text","textChange","textEmit"],[1,"col-xl-4",2,"padding-left","0%"],[2,"display","flex","align-items","center","justify-content","center"],[3,"loading"],[2,"background","white","margin","0px 10px","border-radius","10px 10px 0px 0px","padding","10px","border","solid lightgrey 1px","border-bottom","none"],[2,"align-items","center"],[2,"justify-content","flex-end","display","flex"],[3,"btnType","loading","disabled","btnText","onSubmit"],[2,"align-items","center","display","flex"],[1,"font-warning",3,"icon"],["id","status","name","status",1,"form-control",3,"ngModel","ngModelChange"],["value","0"],["value","1"],[2,"margin","0px 10px"],[2,"margin","0px 10px","border-radius","0px 0px 10px 10px","padding","10px","justify-content","space-between","display","flex","background","#f4f4f4","border","solid lightgrey 1px","border-top","none"],[2,"color","#f88379","align-items","center","display","flex","font-weight","500","cursor","pointer","padding","0px 10px",3,"click"],["TemplateModal",""],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHTML"],[1,"action"]],template:function(e,t){if(1&e){var a=s.Zb();s.Yb(0,"div",0),s.Yb(1,"h3"),s.Rc(2,"Add New Post"),s.Xb(),s.Yb(3,"div",1),s.Yb(4,"div",2),s.Yb(5,"div"),s.Yb(6,"input",3),s.kc("ngModelChange",(function(e){return t.name=e})),s.pc(7,"translate"),s.Xb(),s.Xb(),s.Tb(8,"br"),s.Yb(9,"dropzone",4),s.kc("error",(function(e){return t.onUploadError(e)}))("success",(function(e){return t.onUploadSuccess(e)})),s.Xb(),s.Tb(10,"br"),s.Yb(11,"div",5),s.Yb(12,"app-text-editor",6),s.kc("textChange",(function(e){return t.template=e}))("textEmit",(function(e){return t.handleChange(e,"template")})),s.Xb(),s.Xb(),s.Tb(13,"br"),s.Xb(),s.Yb(14,"div",7),s.Yb(15,"div",8),s.Tb(16,"app-loader",9),s.Xb(),s.Yb(17,"div"),s.Yb(18,"div",10),s.Yb(19,"div",11),s.Yb(20,"h3"),s.Rc(21),s.pc(22,"translate"),s.Xb(),s.Xb(),s.Tb(23,"hr"),s.Yb(24,"div"),s.Yb(25,"div",12),s.Yb(26,"app-button",13),s.kc("onSubmit",(function(){s.Hc(a);var e=s.Dc(48);return t.onViewTemplate(e)})),s.Xb(),s.Xb(),s.Tb(27,"br"),s.Yb(28,"div",14),s.Tb(29,"app-feather-icons",15),s.Rc(30,"\xa0 "),s.Yb(31,"span"),s.Rc(32,"Status :"),s.Xb(),s.Rc(33,"\xa0 "),s.Yb(34,"div"),s.Yb(35,"select",16),s.kc("ngModelChange",(function(e){return t.status=e})),s.Yb(36,"option",17),s.Rc(37,"Draft"),s.Xb(),s.Yb(38,"option",18),s.Rc(39,"Publish"),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Tb(40,"br"),s.Xb(),s.Tb(41,"br"),s.Xb(),s.Tb(42,"hr",19),s.Yb(43,"div",20),s.Yb(44,"div",21),s.kc("click",(function(){return t.goBack()})),s.Rc(45," Go Back "),s.Xb(),s.Yb(46,"app-button",13),s.kc("onSubmit",(function(){return t.onAddCampaign()})),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Pc(47,v,9,1,"ng-template",null,22,s.Qc)}2&e&&(s.Cb(6),s.uc("placeholder",s.qc(7,17,"mag_name")),s.tc("ngModel",t.name),s.Cb(3),s.tc("config",t.config)("message","Click or drag images here to upload"),s.Cb(3),s.tc("text",t.template),s.Cb(4),s.tc("loading",t.loading),s.Cb(5),s.Sc(s.qc(22,19,"Publish")),s.Cb(5),s.tc("btnType","submit")("loading",!1)("disabled",!t.template)("btnText","Preview"),s.Cb(3),s.tc("icon","key"),s.Cb(6),s.tc("ngModel",t.status),s.Cb(11),s.tc("btnType","submit")("loading",!1)("disabled",t.loading)("btnText","Add Campaign"))},directives:[o.b,o.u,o.m,o.p,d.b,p.a,g.a,m.a,f.a,o.v,o.q,o.x],pipes:[h.c],styles:[""]}),C),y=a("wd/R"),x=a("M9IT");function Y(e,t){if(1&e){var a=s.Zb();s.Yb(0,"div"),s.Yb(1,"span",19),s.Yb(2,"i",20),s.kc("click",(function(){s.Hc(a);var e=t.row,n=s.oc(2),i=s.Dc(15);return n.onViewTemplate(e,i)})),s.Xb(),s.Xb(),s.Yb(3,"span",21),s.Yb(4,"i",22),s.kc("click",(function(){s.Hc(a);var e=t.row;return s.oc(2).onDelete(e)})),s.Xb(),s.Xb(),s.Xb()}}function X(e,t){if(1&e){var a=s.Zb();s.Yb(0,"div",24),s.Yb(1,"mat-paginator",25),s.kc("page",(function(e){return s.Hc(a),s.oc(3).pageEvent(e)})),s.Xb(),s.Xb()}if(2&e){var n=s.oc(3);s.Cb(1),s.tc("pageIndex",n.pagination.CurrentPage-1)("length",n.pagination.TotalCount)("pageSize",n.pagination.PageSize)("pageSizeOptions",n.pageSizeOptions)}}function S(e,t){if(1&e&&s.Pc(0,X,2,4,"div",23),2&e){var a=s.oc(2);s.tc("ngIf",!a.loading)}}function w(e,t){if(1&e&&(s.Yb(0,"div",11),s.Yb(1,"ngx-datatable",12),s.Tb(2,"ngx-datatable-column",13),s.pc(3,"translate"),s.Tb(4,"ngx-datatable-column",14),s.pc(5,"translate"),s.Tb(6,"ngx-datatable-column",15),s.pc(7,"translate"),s.Yb(8,"ngx-datatable-column",16),s.pc(9,"translate"),s.Pc(10,Y,5,0,"ng-template",17),s.Xb(),s.Yb(11,"ngx-datatable-footer"),s.Pc(12,S,1,1,"ng-template",18),s.Xb(),s.Xb(),s.Xb()),2&e){var a=s.oc();s.Cb(1),s.tc("rows",a.campaigns)("columnMode","force")("headerHeight",50)("footerHeight",50)("rowHeight","auto")("limit",5),s.Cb(1),s.uc("name",s.qc(3,10,"campaign_name")),s.Cb(2),s.uc("name",s.qc(5,12,"campaign_status")),s.Cb(2),s.uc("name",s.qc(7,14,"campaign_image")),s.Cb(2),s.uc("name",s.qc(9,16,"campaign_action"))}}function T(e,t){if(1&e){var a=s.Zb();s.Yb(0,"div",33),s.Yb(1,"button",34),s.kc("click",(function(){return s.Hc(a),s.oc(2).onPublish()})),s.Rc(2," Publish "),s.Xb(),s.Xb()}}function P(e,t){if(1&e&&(s.Yb(0,"div",26),s.Yb(1,"h5",27),s.Rc(2,"Template"),s.Xb(),s.Yb(3,"button",28),s.kc("click",(function(){return t.$implicit.dismiss("Cross click")})),s.Yb(4,"span",29),s.Rc(5,"\xd7"),s.Xb(),s.Xb(),s.Xb(),s.Yb(6,"div",30),s.Tb(7,"div",31),s.Pc(8,T,3,0,"div",32),s.Xb()),2&e){var a=s.oc();s.Cb(7),s.tc("innerHTML",a.selectedRow.text,s.Ic),s.Cb(1),s.tc("ngIf","Published"!=a.selectedRow.status)}}var R,M,D,_=[{path:"",children:[{path:"",component:(R=function(){function e(t,a,n,i){_classCallCheck(this,e),this.router=t,this.campaignService=a,this.cs=n,this.modalService=i,this.campaigns=[],this.temp=[],this.loading=!1,this.pagination={CurrentPage:1,HasNext:!1,HasPrevious:!1,PageSize:10,TotalCount:0,TotalPages:1},this.pageSizeOptions=[5,10,25,50],this.getCampaigns()}return _createClass(e,[{key:"open",value:function(e){var t=this;console.log(e),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title"}).result.then((function(e){t.closeResult="Closed with: ".concat(e),t.selectedRow=null}),(function(e){t.closeResult="Dismissed ".concat(t.getDismissReason(e)),t.selectedRow=null}))}},{key:"getDismissReason",value:function(e){return e===c.a.ESC?"by pressing ESC":e===c.a.BACKDROP_CLICK?"by clicking on a backdrop":"with: ".concat(e)}},{key:"ngOnInit",value:function(){}},{key:"onAdd",value:function(){this.router.navigate(["/campaign/create-campaign"])}},{key:"onDelete",value:function(e){var t=this;console.log(e,"delete"),this.campaignService.removeCampaign(e.id).subscribe((function(e){console.log("deleted"),t.getCampaigns()}))}},{key:"pageEvent",value:function(e){console.log(e),this.pagination.PageSize=e.pageSize,this.pagination.CurrentPage=e.pageIndex+1,this.getCampaigns()}},{key:"getCampaigns",value:function(){var e=this,t=this.pagination,a=t.PageSize,n=t.CurrentPage;this.loading=!0,this.campaignService.getAllCampaigns("?PageSize=".concat(a,"&PageNumber=").concat(n)).subscribe((function(t){if(t){e.cs.isLoading.next(!1),e.loading=!1,e.campaigns=e.structureData(t.body||[]);var a=JSON.parse(t.headers.get("X-Pagination"));a&&(e.pagination=a)}}))}},{key:"structureData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(console.log(e),e)return e.map((function(e){return Object.assign(Object.assign({},e),{creationDate:e.creationDate?y(e.creationDate).format("YYYY-MM-DD"):"---"})}))}},{key:"onViewTemplate",value:function(e,t){this.selectedRow=e,this.open(t)}},{key:"onPublish",value:function(){var e=this;this.campaignService.updateCampaignStatus(this.selectedRow.id,1).subscribe((function(t){t&&(e.cs.isLoading.next(!1),e.loading=!1)}))}}]),e}(),R.\u0275fac=function(e){return new(e||R)(s.Sb(l.d),s.Sb(u),s.Sb(b.a),s.Sb(c.j))},R.\u0275cmp=s.Mb({type:R,selectors:[["app-campaign-list"]],viewQuery:function(e,t){var a;1&e&&s.Xc(r.d,!0),2&e&&s.Cc(a=s.lc())&&(t.table=a.first)},decls:16,vars:7,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm-12"],[1,"card"],[1,"card-header",2,"display","flex","justify-content","space-between"],[2,"margin-left","10px",3,"btnType","btnText","onSubmit"],[1,"card-body"],[2,"display","flex","align-items","center","justify-content","center"],[3,"loading"],["class","custom-datatable",4,"ngIf"],["TemplateModal",""],[1,"custom-datatable"],[1,"bootstrap",3,"rows","columnMode","headerHeight","footerHeight","rowHeight","limit"],["prop","name",3,"name"],["prop","status",3,"name"],["prop","creationDate",3,"name"],["sortable","false","prop","order id",3,"name"],["ngx-datatable-cell-template",""],["ngx-datatable-footer-template",""],[2,"color","#f88379","cursor","pointer"],[1,"fa","fa-eye",3,"click"],[2,"color","#f88379","cursor","pointer","margin-left","10px"],[1,"fa","fa-trash-o",3,"click"],["class","pagination","style","margin-bottom: 10px; width: -webkit-fill-available",4,"ngIf"],[1,"pagination",2,"margin-bottom","10px","width","-webkit-fill-available"],[2,"width","-webkit-fill-available",3,"pageIndex","length","pageSize","pageSizeOptions","page"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHTML"],["class","action","style","text-align: end",4,"ngIf"],[1,"action",2,"text-align","end"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(s.Yb(0,"div",0),s.Yb(1,"div",1),s.Yb(2,"div",2),s.Yb(3,"div",3),s.Yb(4,"div",4),s.Yb(5,"h5"),s.Rc(6),s.pc(7,"translate"),s.Xb(),s.Yb(8,"app-button",5),s.kc("onSubmit",(function(){return t.onAdd()})),s.Xb(),s.Xb(),s.Yb(9,"div",6),s.Tb(10,"br"),s.Yb(11,"div",7),s.Tb(12,"app-loader",8),s.Xb(),s.Pc(13,w,13,18,"div",9),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Xb(),s.Pc(14,P,9,2,"ng-template",null,10,s.Qc)),2&e&&(s.Cb(6),s.Sc(s.qc(7,5,"Campiagns")),s.Cb(2),s.tc("btnType","submit")("btnText","Add"),s.Cb(4),s.tc("loading",t.loading),s.Cb(1),s.tc("ngIf",!t.loading))},directives:[m.a,g.a,i.m,r.d,r.b,r.a,r.e,r.c,x.a],pipes:[h.c],styles:[""]}),R),data:{title:"Campaign",breadcrumb:"Campaign"}},{path:"create-campaign",component:k,data:{title:"Campaign",breadcrumb:"Campaign"}},{path:"edit-campaign/:id",component:k,data:{title:"Campaign",breadcrumb:"Campaign"}}]}],H=((M=function e(){_classCallCheck(this,e)}).\u0275mod=s.Qb({type:M}),M.\u0275inj=s.Pb({factory:function(e){return new(e||M)},imports:[[l.h.forChild(_)],l.h]}),M),I=a("PCNd"),L={maxFilesize:50,url:"https://httpbin.org/post"},z=((D=function e(){_classCallCheck(this,e)}).\u0275mod=s.Qb({type:D}),D.\u0275inj=s.Pb({factory:function(e){return new(e||D)},providers:[{provide:d.a,useValue:L},c.c],imports:[[i.c,H,c.k,d.d,o.t,o.h,r.f,I.a]]}),D)}}]);